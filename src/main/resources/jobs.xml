<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:b="http://www.springframework.org/schema/batch" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/batch 
		http://www.springframework.org/schema/batch/spring-batch-2.2.xsd
		http://www.springframework.org/schema/beans 
		http://www.springframework.org/schema/beans/spring-beans-3.2.xsd">

	<import resource="context.xml"/>
		
	<b:job id="test">
		<b:step id="test1" next="test2">
			<b:tasklet xmlns="http://www.springframework.org/schema/beans">
				<bean parent="shellTasklet">
					<property name="command" value="pwd" />
				</bean>
			</b:tasklet>
		</b:step>
		<b:step id="test2" next="">
			<b:tasklet xmlns="http://www.springframework.org/schema/beans">
				<bean parent="shellTasklet">
					<property name="command" value="printenv" />
				</bean>
			</b:tasklet>
		</b:step>
	</b:job>
	
	<b:job id="job1">
		<b:step id="step1" next="step2">
			<b:tasklet xmlns="http://www.springframework.org/schema/beans">
				<bean parent="shellTasklet">
					<property name="command" value="sh" />
					<property name="script" value="${home}/script/generate_data.sh" />
					<property name="arguments">
						<list>
							<value>${data}/input</value>
						</list>
					</property>
				</bean>
			</b:tasklet>
		</b:step>
		<b:step id="step2" next="step3">
			<b:tasklet xmlns="http://www.springframework.org/schema/beans">
				<bean parent="pigTasklet">
					<property name="script" value="${home}/script/sum.pig" />
					<property name="params">
						<map>
							<entry key="input" value="${data}/input" />
							<entry key="output" value="${data}/output" />
						</map>
					</property>
				</bean>
			</b:tasklet>
		</b:step>
		<b:step id="step3" next="">
			<b:tasklet xmlns="http://www.springframework.org/schema/beans">
				<bean parent="hiveTasklet">
					<property name="script" value="${home}/script/extract.hql" />
					<property name="params">
						<map>
							<entry key="input" value="${data}/output" />
							<entry key="output" value="${data}/extracted" />
						</map>
					</property>
				</bean>
			</b:tasklet>
		</b:step>
	</b:job>
		


</beans>